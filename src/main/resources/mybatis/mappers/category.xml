<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="category">

	<!-- 카테고리 리스트 -->
	<select id="selectCateList" resultType="CateVo">
		<![CDATA[
			SELECT  c.cateNo,
			        id,
			        cateName,
			        description,
			        nvl(p.sum, 0) postSum
			FROM category c left outer join (select  cateNo, 
			                          count(postNo) sum
			                  from post
			                  group by cateNo) p
			on c.cateNo = p.cateNo
			order by cateNo desc
		]]>
	</select>
	
	<!-- 카테고리 입력 -->
	<insert id="cateInsert" parameterType="CateVo">
		<![CDATA[
			insert into category
			values(seq_category_no.nextval, 
					#{id}, 
					#{cateName}, 
					#{description}, 
					sysdate)
		]]>
	</insert>




</mapper>